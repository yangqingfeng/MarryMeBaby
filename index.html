<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <!--<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"/>-->
    <title>Marry Me, My Dearest Baby!</title>
    <style type="text/css">
        body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, fieldset, input, textarea, p, blockquote, th, td {
            margin: 0;
            padding: 0;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        fieldset, img {
            border: 0;
        }

        address, caption, cite, code, dfn, em, strong, th, var {
            font-style: normal;
            font-weight: normal;
        }

        ol, ul {
            list-style: none;
        }

        caption, th {
            text-align: left;
        }

        h1, h2, h3, h4, h5, h6 {
            font-size: 100%;
            font-weight: bold;
        }

        p{
            font-size: 14px;
            font-weight: bold;
        }

        q:before, q:after {
            content: '';
        }

        abbr, acronym {
            border: 0;
        }

        body, html {
            height: 100%;
            width: 100%;
        }

        /* Common 定义基本样式 */
        body {
            font: 12px/1.8 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, Sans-serif;
            padding: 0;
            margin: 0;
            color: #333333;
        }

        #map {
            height: 100%;
            width: 100%;
        }

        #loading {
            height: 100%;
            width: 100%;
            position: absolute;
            z-index: 999;
            background: url("http://lukesign.qiniudn.com/images/site/loading.gif") no-repeat center center #FFFAD1;
            top: 0;
            left: 0;
            text-align: center;
            line-height: 300px;
            font-size: 32px;
            color: #666;
        }

        #theEnd {
            height: 0%;
            width: 100%;
            line-height: 0;
            font-size: 0;
            overflow: hidden;
            position: absolute;
            z-index: 999;
            background-color: #FFFAD1;
            top: 0;
            left: 0;
        }

        #theEndText {
            position: absolute;
            left: 0;
            z-index: 9999;
            width: 100%;
            text-align: center;
            font-size: 26px;
            line-height: 2;
            top: 50%;
            margin-top: -100px;
            height: 200px;
        }
    </style>
</head>
<body>
<div id="loading">正在加载...</div>
<div id="theEnd"></div>
<div id="map"></div>

<!-- 指定全局的分享内容 -->
<input id="wsContent" type="hidden" value="Marry Me, My Dearest Babay!「变的是岁月，不变的是我们的那颗心。」。 via @Issac">
<!-- 指定全局的分享链接 -->
<input id="wsUrl" type="hidden" value="http://liumeijun.com/">
<!-- 指定全局的分享图片 -->
<input id="wsPic" type="hidden" value="http://lukesign.qiniudn.com/social.png">

<script type="text/javascript" src="http://lukesign.qiniudn.com/jquery.min.js"></script>
<script type="text/javascript" src="http://lukesign.qiniudn.com/jquery.wshare.js"></script>
<script type="text/javascript" src="http://lukesign.qiniudn.com/sm/soundmanager2-nodebug-jsmin.js"></script>
<script type="text/javascript">
    (function (a, b) {
        "use strict";
        var c = function () {
            var a = [["requestFullscreen", "exitFullscreen", "fullscreenchange", "fullscreen", "fullscreenElement"], ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitIsFullScreen", "webkitCurrentFullScreenElement"], ["mozRequestFullScreen", "mozCancelFullScreen", "mozfullscreenchange", "mozFullScreen", "mozFullScreenElement"]];
            for (var c = 0, d = a.length; c < d; c++) {
                var e = a[c];
                if (e[1]in b)return e
            }
        }();
        if (!c)return a.screenfull = !1;
        var d = "ALLOW_KEYBOARD_INPUT"in Element, e = {
            init: function () {
                return b.addEventListener(c[2], function (a) {
                    e.isFullscreen = b[c[3]], e.element = b[c[4]], e.onchange(a)
                }), this
            }, isFullscreen: b[c[3]], element: b[c[4]], request: function (a) {
                a = a || b.documentElement, a[c[0]](d && Element.ALLOW_KEYBOARD_INPUT), b.isFullscreen || a[c[0]]()
            }, exit: function () {
                b[c[1]]()
            }, toggle: function (a) {
                this.isFullscreen ? this.exit() : this.request(a)
            }, onchange: function () {
            }
        };
        a.screenfull = e.init()
    })(window, document)
</script>
<script type="text/javascript">

    // 初始化地图中心
    var MP_CEN = {lng: 3.894763, lat: 44.529534};

    // 中国中心
    var CN_CEN = {lng: 103.758427, lat: 36.172333};

    // 电子科技大学
    var CD_UESTC = {lng: 103.933357, lat: 30.752561};

    //  煤科院
    var CQ_MKY = {lng: 106.456839, lat: 29.515844};

    //  金佛山
    var CQ_JFS = {lng: 107.207362, lat: 29.104603};

    //  巫山
    var CQ_WS = {lng: 109.890539, lat: 31.087512};

    //  解放碑
    var CQ_JFB = {lng: 106.583254, lat: 29.563903};

    //  洋人街
    var CQ_YRJ = {lng: 106.607746, lat: 29.609419}

    //  毛肚王火锅
    var CQ_MDW = {lng: 106.462927, lat: 29.521366};

    // 第一次亲密接触，天星桥
    var CQ_TXQ = {lng: 106.461187, lat: 29.552208};

    // 第一次看电影：横店影视城
    var CQ_HDYS = {lng: 106.468516, lat: 29.564304}

    //My Home
    var CQ_MyHome = {lng: 106.447945, lat: 29.516109};
    //
    var MUSIC;

    ///以指定信息缩放至指定位置
    function zoomTo(zoom, time, callback, point) {
        var time = time || 1500;
        var callback = callback || function () {
                };
        var loop = '';

        function loopZoom() {
            var curZoom = map.getZoom();
            if (curZoom == zoom) {
                clearTimeout(loop);
                callback();
                return false;
            }
            var plus = curZoom > zoom ? -1 : 1;
            var toZoom = curZoom + plus;
            map.setZoom(toZoom);
            if (point) {
                map.setCenter(point);
            }
            var center = map.getCenter();
            loop = setTimeout(loopZoom, time);
        }

        loopZoom();
    }

    function loopWin(loopList, time, callback) {
        var i = 0;
        var len = loopList.length;
        var callback = callback || function () {
                };
        var timeoutId = undefined;
        var timeout = undefined;

        function loopWinInner() {
            if (i == len) {
                clearTimeout(timeout);
                setTimeout(callback, 2000);
                return false;
            }

            var opts = {
                title: loopList[i].title,
                maxWidth: 600,
                height: 0
            }
            var infoWindow = new BMap.InfoWindow(loopList[i].content, opts);
            map.openInfoWindow(infoWindow, new BMap.Point(loopList[i].point.lng, loopList[i].point.lat));
            infoWindow.redraw();
            i++;
            if (loopList[i]) {
                timeout = loopList[i].timeout || time;
            }
            timeoutId = setTimeout(loopWinInner, timeout);
        }

        loopWinInner();
    }

    function panZoom_UESTC() {
        map.panTo(new BMap.Point(CD_UESTC.lng, CD_UESTC.lat));  //将地图的中心点更改为给定的点
        setTimeout(function () {
            zoomTo(10, 2000, function () {
                var marker = new BMap.Marker(CD_UESTC);
                map.addOverlay(marker);
                marker.setAnimation(BMAP_ANIMATION_BOUNCE);
                setTimeout(function () {
                    var cdPhotos = [
                        {
                            title: '电子科技大学-成都',
                            content: '<p>2006~2013</p><p>我向左转，你向右走，我们始终不曾相遇</p><img src="./images/UESTC/turnleft.jpg" width="370" height="373" alt="陈家祠" />',
                            point: CD_UESTC
                        },
                        {
                            title: '成都——>重庆',
                            content: '<p>幸运的是，我们即将在另一组城市遇见。</p><image src="./images/UESTC/train.jpg" width="500" height="333" alt="告别青春的火车"/>',
                            point: CD_UESTC
                        }
                    ];
                    loopWin(cdPhotos, 3000, panZoom_CQ);
                }, 2000);
            }, CD_UESTC);
        }, 800);
    }

    function panZoom_CQ() {
        zoomTo(10, 1500, function () {
            setTimeout(function () {
                var start = new BMap.Point(CD_UESTC.lng, CD_UESTC.lat);
                var end = new BMap.Point(CQ_MKY.lng, CQ_MKY.lat);
                var driving2 = new BMap.DrivingRoute(map, {renderOptions: {map: map, autoViewport: false}});
                driving2.search(start, end);

                setTimeout(function () {
                    zoomTo(10, 800, function () {
                        var marker = new BMap.Marker(CQ_MKY);
                        map.addOverlay(marker);
                        marker.setAnimation(BMAP_ANIMATION_BOUNCE);

                        map.panTo(new BMap.Point(CQ_MKY.lng, CQ_MKY.lat));

                        setTimeout(function () {
                            var describle = [
                                {
                                    title: '成都 → 重庆',
                                    content: '<p>2013年的夏天，火辣辣的重庆，我们第一次相遇在<span class="strong">@毛肚王火锅</span></p>',
                                    point: CQ_MDW
                                },
                                {
                                    title: '亲密接触 ',
                                    content: '<p>直到2013平安夜，有了第一次亲密的交流。</p>',
                                    point: CQ_TXQ
                                },
                                {
                                    title: '亲密接触',
                                    content: '<p>相逢恨晚，一箭穿心。</p><p>此后，每天都聊到深夜。</p><image src="./images/MKY/qiubite.jpg" width="500" height="373" alt="两颗心在深夜跳动" />',
                                    point: CQ_MKY
                                },
                                {
                                    title: '看电影@横店影城',
                                    content: '<p>第一次看的电影。<span class="strong">@横店影城</span></p><image src="./images/MKY/sirendingzhi.jpg" width="500" height="373" alt="私人定制电影票" />',
                                    point: CQ_HDYS
                                },
                                {
                                    title: '第一次亲亲一吻@招待所',
                                    content: '<p>第一次亲亲一吻，从此生命中就离不开你了。<span class="strong">@招待所</span></p><image src="./images/MKY/qinwen.jpg" width="500" height="373" alt="亲亲一吻" />',
                                    point: CQ_MKY
                                }
                            ];
                            loopWin(describle, 2000, panZoom_JFB);
                        }, 2000);
                    })
                }, 2000);
            })
        })
    }

    function panZoom_JFB() {
        map.clearOverlays(); //清除地图上所有覆盖物
        map.closeInfoWindow(); //关闭在地图上打开的信息窗口
        zoomTo(10, 1500, function () {
            map.panTo(new BMap.Point(CQ_JFB.lng, CQ_JFB.lat));
            setTimeout(function () {
                zoomTo(11, 1500, function () {
                    var describle = [{
                        title: '难忘的夜晚@解放碑',
                        content: '<p>第一次恋爱活动 跨年<span class="strong">@解放碑</span></p><image src="./images/JFB/JFB1.jpg" width="480" height="645" alt="难忘的跨年夜" />',
                        point: CQ_JFB
                    },{
                        title: '难忘的夜晚@解放碑',
                        content: '<p>第一次恋爱活动 跨年<span class="strong">@解放碑</span></p><image src="./images/JFB/JFB2.jpg" width="500" height="373" alt="难忘的跨年夜" />',
                        point: CQ_JFB
                    }];
                    loopWin(describle, 2000, panZoom_JFS);
                })
            })
        })
    }

    /**
     * 地图移动到金佛山
     */
    function panZoom_JFS() {
        map.clearOverlays(); //清除地图上所有覆盖物
        map.closeInfoWindow(); //关闭在地图上打开的信息窗口
        zoomTo(7, 1500, function () {
            map.panTo(new BMap.Point(CQ_JFS.lng, CQ_JFS.lat));
            setTimeout(function () {
                zoomTo(10, 1500, function () {
                    var describle = [{
                        title: '第一次旅游@金佛山',
                        content: '<p>雪娃在雪地里玩雪，嘿嘿<span class="strong">@金佛山</span></p><image src="./images/JFS/JFS1.jpg" width="500" height="373" alt="玩雪" />',
                        point: CQ_JFS
                    },{
                        title: '第一次旅游@金佛山',
                        content: '<p>瞧这细腿。<span class="strong">@金佛山</span></p><image src="./images/JFS/JFS2.jpg" width="500" height="333" alt="细腿" />',
                        point: CQ_JFS
                    },{
                        title: '第一次旅游@金佛山',
                        content: '<p>雪娃滑雪。<span class="strong">@金佛山</span></p><image src="./images/JFS/JFS3.jpg" width="500" height="333" alt="滑雪" />',
                        point: CQ_JFS
                    },{
                        title: '第一次旅游@金佛山',
                        content: '<p>雪地跳跃。<span class="strong">@金佛山</span></p><image src="./images/JFS/JFS4.jpg" width="500" height="333" alt="雪地跳跃" />',
                        point: CQ_JFS
                    },{
                        title: '第一次旅游@金佛山',
                        content: '<p>雪地紧紧相拥。<span class="strong">@金佛山</span></p><image src="./images/JFS/JFS5.jpg" width="500" height="333" alt="相拥" />',
                        point: CQ_JFS
                    }];
                    loopWin(describle, 2000, panZoom_WS);
                })
            })
        })
    }

    /**
     * 地图移动到巫山
     */
    function panZoom_WS() {
        map.clearOverlays(); //清除地图上所有覆盖物
        map.closeInfoWindow(); //关闭在地图上打开的信息窗口
        zoomTo(8, 1500, function () {
            map.panTo(new BMap.Point(CQ_WS.lng, CQ_WS.lat));
            setTimeout(function () {
                zoomTo(10, 1500, function () {
                    var describle = [{
                        title: '看巫山红叶@巫山',
                        content: '<p>亲亲生日游巫山小三峡<span class="strong">@巫山</span></p><image src="./images/WS/WS1.jpg" width="500" height="375" alt="坐船" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>共赴巫山。<span class="strong">@巫山</span></p><image src="./images/WS/WS2.jpg" width="500" height="375" alt="共赴巫山" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>这高兴的。。。<span class="strong">@巫山</span></p><image src="./images/WS/WS3.jpg" width="500" height="666" alt="共赴巫山" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>各位观众，精彩要来了，注意。<span class="strong">@巫山</span></p><image src="./images/WS/WSQT4.jpg" width="500" height="375" alt="小乖乖" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>1,2,3，起跳。<span class="strong">@巫山</span></p><image src="./images/WS/WSQT5.jpg" width="500" height="375" alt="起跳" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>跳起来了。<span class="strong">@巫山</span></p><image src="./images/WS/WSQT6.jpg" width="500" height="375" alt="起跳" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>1,2,3，起跳。<span class="strong">@巫山</span></p><image src="./images/WS/WSQT7.jpg" width="500" height="375" alt="起跳" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>1,2,3，起跳。<span class="strong">@巫山</span></p><image src="./images/WS/WSQT8.jpg" width="500" height="375" alt="起跳" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>1,2,3，起跳。<span class="strong">@巫山</span></p><image src="./images/WS/WSQT9.jpg" width="500" height="375" alt="起跳" />',
                        point: CQ_WS
                    },{
                        title: '看巫山红叶@巫山',
                        content: '<p>亲亲小乖乖。<span class="strong">@巫山</span></p><image src="./images/WS/WS10.jpg" width="500" height="375" alt="小乖乖" />',
                        point: CQ_WS
                    }];
                    loopWin(describle, 2000, panZoom_MyHomeInCHongQing);
                })
            })
        })
    }

    /**
     * 地图移动到重庆上佳双子鑫座
     */
    function panZoom_MyHomeInCHongQing() {
        map.clearOverlays(); //清除地图上所有覆盖物
        map.closeInfoWindow(); //关闭在地图上打开的信息窗口
        zoomTo(11, 1500, function () {
            map.panTo(new BMap.Point(CQ_MyHome.lng, CQ_MyHome.lat));
            setTimeout(function () {
                zoomTo(12, 1500, function () {
                    var describle = [{
                        title: '平淡而幸福的日子@上佳',
                        content: '<p>520<span class="strong">@上佳</span></p><image src="./images/SZX/520.jpg" width="500" height="373" alt="520" />',
                        point: CQ_MyHome
                    },{
                        title: '平淡而幸福的日子@上佳',
                        content: '<p>Hi,美女。<span class="strong">@上佳</span></p><image src="./images/SZX/MEINV.jpg" width="279" height="373" alt="美女" />',
                        point: CQ_MyHome
                    },{
                        title: '平淡而幸福的日子@上佳',
                        content: '<p>臭美中。<span class="strong">@上佳</span></p><image src="./images/SZX/CM.jpg" width="500" height="373" alt="臭美" />',
                        point: CQ_MyHome
                    },{
                        title: '平淡而幸福的日子@上佳',
                        content: '<p>好甜的棉花糖。<span class="strong">@上佳</span></p><image src="./images/SZX/MHT.jpg" width="500" height="373" alt="棉花糖" />',
                        point: CQ_MyHome
                    },{
                        title: '平淡而幸福的日子@上佳',
                        content: '<p>刷牙。<span class="strong">@上佳</span></p><image src="./images/SZX/ShuaYa.jpg" width="279" height="373" alt="刷牙" />',
                        point: CQ_MyHome
                    },{
                        title: '平淡而幸福的日子@上佳',
                        content: '<p>一箭穿心。<span class="strong">@上佳</span></p><image src="./images/SZX/YJCX.jpg" width="500" height="373" alt="一箭穿心" />',
                        point: CQ_MyHome
                    },{
                        title: '平淡而幸福的日子@上佳',
                        content: '<p>亲亲一吻。<span class="strong">@上佳</span></p><image src="./images/SZX/QW.jpg" width="279" height="373" alt="亲吻" />',
                        point: CQ_MyHome
                    }];
                    loopWin(describle, 2000, wannaTo);
                })
            })
        })
    }


    function wannaTo() {
        map.closeInfoWindow();
        zoomTo(5, 1000, function () {
            map.panTo(new BMap.Point(CN_CEN.lng, CN_CEN.lat));
            map.setMapType(BMAP_HYBRID_MAP);
            setTimeout(function () {
                var wanna = [
                    {
                        title: '',
                        content: '地图标上想去的地方，有一天，带着你去流浪。',
                        point: CN_CEN
                    },
                    {
                        title: '北京',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/xiamen.jpg" width="500" height="338" alt="wannaTo" />',
                        point: {lng:116.401969, lat:39.915599}
                    },
                    {
                        title: '杭州西湖',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/xiamen.jpg" width="500" height="338" alt="wannaTo" />',
                        point: {lng:120.133138, lat:30.267479}
                    },
                    {
                        title: '厦门鼓浪屿',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/xiamen.jpg" width="500" height="338" alt="wannaTo" />',
                        point: {lng: 118.148154, lat: 24.497912}
                    },
                    {
                        title: '凤凰古镇',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/fenghuang.jpg" width="500" height="337" alt="wannaTo" />',
                        point: {lng: 100.21191, lat: 26.928061}
                    },
                    {
                        title: '桂林阳朔',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/guilin.jpg" width="499" height="399" alt="wannaTo" />',
                        point: {lng: 110.503626, lat: 24.780932}
                    },
                    {
                        title: '西藏布达拉宫',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/xizang.jpg" width="500" height="400" alt="wannaTo" />',
                        point: {lng: 91.115691, lat: 29.687083}
                    },
                    {
                        title: '海南三亚',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/xihu.jpg" width="500" height="381" alt="wannaTo" />',
                        point: {lng: 109.515297, lat: 18.2586}
                    },
                    {
                        title: '泰国普吉岛',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/xihu.jpg" width="500" height="375" alt="wannaTo" />',
                        point: {lng: 98.3599288, lat: 7.9692519}
                    },
                    {
                        title: '韩国济州岛',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/xihu.jpg" width="500" height="375" alt="wannaTo" />',
                        point: {lng: 126.5690003, lat: 33.3354988}
                    },
                    {
                        title: '马尔代夫',
                        content: '<img src="http://lukesign.qiniudn.com/images/wannato/xihu.jpg" width="500" height="283" alt="wannaTo" />',
                        point: {lng: 73.5361034, lat: 1.9772469}
                    }
                ];
                loopWin(wanna, 2000, showMarkerText);
            }, 1500);
        });
    }

    var markerText =
            [{guid:"TANGRAM__3x",lat:39.070415,lng:78.919508},{guid:"TANGRAM__40",lat:38.320675,lng:79.103481},{guid:"TANGRAM__4c",lat:38.998669,lng:79.31505},{guid:"TANGRAM__4f",lat:38.458238,lng:79.489824},{guid:"TANGRAM__4i",lat:38.761387,lng:78.753932},{guid:"TANGRAM__4l",lat:38.905289,lng:79.609406},{guid:"TANGRAM__4u",lat:38.998669,lng:79.131077},{guid:"TANGRAM__4x",lat:38.349657,lng:79.305851},{guid:"TANGRAM__50",lat:39.712817,lng:80.19812},{guid:"TANGRAM__53",lat:39.61328,lng:80.133729},{guid:"TANGRAM__56",lat:39.470833,lng:80.004948},{guid:"TANGRAM__59",lat:39.328091,lng:79.912962},{guid:"TANGRAM__5c",lat:39.199372,lng:79.866968},{guid:"TANGRAM__5f",lat:39.0202,lng:79.885366},{guid:"TANGRAM__5i",lat:38.804588,lng:79.866968},{guid:"TANGRAM__5l",lat:38.581096,lng:79.876167},{guid:"TANGRAM__5o",lat:38.407587,lng:79.793379},{guid:"TANGRAM__5u",lat:39.213686,lng:80.142928},{guid:"TANGRAM__5x",lat:39.220842,lng:80.372894},{guid:"TANGRAM__60",lat:39.213686,lng:80.584463},{guid:"TANGRAM__6x",lat:38.890912,lng:80.004948},{guid:"TANGRAM__70",lat:38.890912,lng:80.188921},{guid:"TANGRAM__73",lat:38.890912,lng:80.391291},{guid:"TANGRAM__76",lat:38.51608,lng:80.041743},{guid:"TANGRAM__79",lat:38.44377,lng:80.299305},{guid:"TANGRAM__7c",lat:38.487165,lng:80.520073},{guid:"TANGRAM__7f",lat:38.248167,lng:79.820975},{guid:"TANGRAM__7i",lat:38.146534,lng:79.866968},{guid:"TANGRAM__7l",lat:39.185055,lng:80.768436},{guid:"TANGRAM__7o",lat:38.977131,lng:80.823628},{guid:"TANGRAM__7r",lat:38.696535,lng:80.814429},{guid:"TANGRAM__7u",lat:38.479934,lng:80.832827},{guid:"TANGRAM__7x",lat:38.335167,lng:80.851224},{guid:"TANGRAM__80",lat:38.190109,lng:80.823628},{guid:"TANGRAM__83",lat:38.015653,lng:79.986551},{guid:"TANGRAM__86",lat:37.884536,lng:80.271709},{guid:"TANGRAM__89",lat:37.891826,lng:80.418887},{guid:"TANGRAM__8c",lat:37.957408,lng:80.621258},{guid:"TANGRAM__8f",lat:38.044758,lng:80.74084},{guid:"TANGRAM__8i",lat:38.544983,lng:80.67645},{guid:"TANGRAM__8l",lat:38.890912,lng:80.621258},{guid:"TANGRAM__8o",lat:38.595537,lng:78.781528},{guid:"TANGRAM__8r",lat:38.746981,lng:79.58181},{guid:"TANGRAM__8u",lat:38.962768,lng:78.809124},{guid:"TANGRAM__8x",lat:39.034551,lng:79.499023},{guid:"TANGRAM__90",lat:38.44377,lng:78.919508},{guid:"TANGRAM__93",lat:38.573875,lng:79.535817},{guid:"TANGRAM__9c",lat:39.463703,lng:81.6975},{guid:"TANGRAM__9f",lat:39.335235,lng:81.596314},{guid:"TANGRAM__9i",lat:39.242305,lng:81.485931},{guid:"TANGRAM__9l",lat:39.113427,lng:81.403143},{guid:"TANGRAM__9o",lat:38.984311,lng:81.320355},{guid:"TANGRAM__9r",lat:39.070415,lng:81.642308},{guid:"TANGRAM__9x",lat:38.912477,lng:81.651506},{guid:"TANGRAM__a3",lat:38.746981,lng:81.660705},{guid:"TANGRAM__a9",lat:38.588317,lng:81.669904},{guid:"TANGRAM__ac",lat:38.422062,lng:81.660705},{guid:"TANGRAM__af",lat:38.240912,lng:81.660705},{guid:"TANGRAM__ai",lat:38.073851,lng:81.660705},{guid:"TANGRAM__al",lat:37.913693,lng:81.669904},{guid:"TANGRAM__ar",lat:39.313801,lng:82.093041},{guid:"TANGRAM__au",lat:38.869341,lng:81.21917},{guid:"TANGRAM__b6",lat:39.084755,lng:82.056247},{guid:"TANGRAM__b9",lat:38.941219,lng:82.056247},{guid:"TANGRAM__bc",lat:38.77579,lng:82.074644},{guid:"TANGRAM__bf",lat:38.646054,lng:82.10224},{guid:"TANGRAM__bi",lat:38.479934,lng:82.10224},{guid:"TANGRAM__bl",lat:38.306179,lng:82.111439},{guid:"TANGRAM__bo",lat:38.095664,lng:82.129836},{guid:"TANGRAM__br",lat:37.950124,lng:82.139035},{guid:"TANGRAM__bu",lat:38.219144,lng:82.111439},{guid:"TANGRAM__bx",lat:39.335235,lng:82.019452},{guid:"TANGRAM__c0",lat:39.185055,lng:82.359802},{guid:"TANGRAM__c3",lat:39.192214,lng:82.562172},{guid:"TANGRAM__c6",lat:39.199372,lng:82.736947},{guid:"TANGRAM__c9",lat:39.192214,lng:82.893324},{guid:"TANGRAM__cc",lat:39.156413,lng:83.003708},{guid:"TANGRAM__cf",lat:39.041725,lng:83.012906},{guid:"TANGRAM__ci",lat:38.948403,lng:83.012906},{guid:"TANGRAM__cl",lat:38.826179,lng:83.031304},{guid:"TANGRAM__co",lat:38.703744,lng:83.049701},{guid:"TANGRAM__cr",lat:38.588317,lng:83.022105},{guid:"TANGRAM__cu",lat:38.494395,lng:83.049701},{guid:"TANGRAM__cx",lat:38.371386,lng:83.031304},{guid:"TANGRAM__d0",lat:38.240912,lng:83.058899},{guid:"TANGRAM__d3",lat:38.11747,lng:83.040502},{guid:"TANGRAM__d6",lat:38.015653,lng:83.031304},{guid:"TANGRAM__d9",lat:37.950124,lng:82.976112},{guid:"TANGRAM__dc",lat:38.037483,lng:82.828933},{guid:"TANGRAM__df",lat:39.492218,lng:83.895976},{guid:"TANGRAM__di",lat:39.61328,lng:83.987963},{guid:"TANGRAM__dl",lat:39.413771,lng:83.849983},{guid:"TANGRAM__do",lat:39.278062,lng:83.757997},{guid:"TANGRAM__dr",lat:39.156413,lng:83.675209},{guid:"TANGRAM__du",lat:39.134923,lng:83.886778},{guid:"TANGRAM__dx",lat:39.142087,lng:84.079949},{guid:"TANGRAM__e0",lat:39.156413,lng:84.254724},{guid:"TANGRAM__e3",lat:39.378084,lng:84.411101},{guid:"TANGRAM__e6",lat:39.313801,lng:84.34671},{guid:"TANGRAM__e9",lat:39.034551,lng:84.135141},{guid:"TANGRAM__ec",lat:38.948403,lng:83.987963},{guid:"TANGRAM__ef",lat:38.869341,lng:83.905175},{guid:"TANGRAM__ei",lat:38.804588,lng:83.813189},{guid:"TANGRAM__el",lat:38.739776,lng:83.712004},{guid:"TANGRAM__eo",lat:38.732571,lng:83.895976},{guid:"TANGRAM__er",lat:38.739776,lng:84.079949},{guid:"TANGRAM__eu",lat:38.588317,lng:84.309916},{guid:"TANGRAM__ex",lat:38.768589,lng:84.438697},{guid:"TANGRAM__f0",lat:38.92685,lng:84.549081},{guid:"TANGRAM__f3",lat:38.732571,lng:84.28232},{guid:"TANGRAM__f6",lat:38.479934,lng:84.162737},{guid:"TANGRAM__f9",lat:38.371386,lng:84.024758},{guid:"TANGRAM__fc",lat:38.262675,lng:83.905175},{guid:"TANGRAM__ff",lat:38.197369,lng:83.822387},{guid:"TANGRAM__fi",lat:38.132003,lng:83.767195},{guid:"TANGRAM__fl",lat:38.088394,lng:83.859182},{guid:"TANGRAM__fo",lat:38.139269,lng:84.098347},{guid:"TANGRAM__fr",lat:38.182848,lng:84.291518},{guid:"TANGRAM__fu",lat:38.29168,lng:84.438697},{guid:"TANGRAM__fx",lat:39.520723,lng:84.668663},{guid:"TANGRAM__g0",lat:39.53497,lng:84.871033},{guid:"TANGRAM__g3",lat:39.53497,lng:85.110198},{guid:"TANGRAM__g6",lat:39.549215,lng:85.330966},{guid:"TANGRAM__g9",lat:39.556336,lng:85.57013},{guid:"TANGRAM__gf",lat:39.783827,lng:85.110198},{guid:"TANGRAM__gi",lat:39.712817,lng:85.128595},{guid:"TANGRAM__gl",lat:39.428041,lng:85.119397},{guid:"TANGRAM__go",lat:39.306654,lng:85.110198},{guid:"TANGRAM__gr",lat:39.206529,lng:85.137794},{guid:"TANGRAM__gu",lat:39.142087,lng:84.806643},{guid:"TANGRAM__gx",lat:39.134923,lng:84.999814},{guid:"TANGRAM__h0",lat:39.120593,lng:85.183787},{guid:"TANGRAM__h3",lat:39.134923,lng:85.340164},{guid:"TANGRAM__h6",lat:39.14925,lng:85.496541},{guid:"TANGRAM__h9",lat:38.876532,lng:84.788245},{guid:"TANGRAM__hc",lat:38.746981,lng:84.696259},{guid:"TANGRAM__hf",lat:38.602756,lng:84.705458},{guid:"TANGRAM__hi",lat:38.458238,lng:84.760649},{guid:"TANGRAM__hl",lat:38.306179,lng:84.880232},{guid:"TANGRAM__ho",lat:38.833375,lng:85.064205},{guid:"TANGRAM__hr",lat:38.79739,lng:85.275774},{guid:"TANGRAM__hx",lat:38.869341,lng:85.478144},{guid:"TANGRAM__i0",lat:38.92685,lng:85.698912},{guid:"TANGRAM__i3",lat:38.77579,lng:85.809295},{guid:"TANGRAM__i6",lat:38.609974,lng:85.818494},{guid:"TANGRAM__i9",lat:38.472703,lng:85.790898},{guid:"TANGRAM__ic",lat:38.306179,lng:85.698912},{guid:"TANGRAM__iu",lat:39.861852,lng:86.489995},{guid:"TANGRAM__ix",lat:39.755432,lng:86.398009},{guid:"TANGRAM__j0",lat:39.591931,lng:86.278426},{guid:"TANGRAM__j3",lat:39.506472,lng:86.18644},{guid:"TANGRAM__j6",lat:39.356663,lng:86.103652},{guid:"TANGRAM__j9",lat:39.206529,lng:86.094453},{guid:"TANGRAM__jc",lat:39.056071,lng:86.241632},{guid:"TANGRAM__jf",lat:38.746981,lng:86.38881},{guid:"TANGRAM__ji",lat:38.523307,lng:86.554386},{guid:"TANGRAM__jl",lat:38.407587,lng:86.701564},{guid:"TANGRAM__jo",lat:38.934035,lng:86.32442},{guid:"TANGRAM__jr",lat:38.335167,lng:86.821147},{guid:"TANGRAM__ju",lat:38.306179,lng:86.959126},{guid:"TANGRAM__jx",lat:39.177896,lng:86.719962},{guid:"TANGRAM__k0",lat:39.070415,lng:86.756756},{guid:"TANGRAM__k3",lat:38.962768,lng:86.710763},{guid:"TANGRAM__k6",lat:38.869341,lng:86.637174},{guid:"TANGRAM__k9",lat:38.746981,lng:86.554386},{guid:"TANGRAM__kc",lat:38.559431,lng:86.379612},{guid:"TANGRAM__kf",lat:38.400349,lng:86.112851},{guid:"TANGRAM__ki",lat:39.199372,lng:85.836891},{guid:"TANGRAM__kl",lat:39.263761,lng:86.342817},{guid:"TANGRAM__ko",lat:39.299507,lng:86.517591},{guid:"TANGRAM__kr",lat:39.349521,lng:86.72916},{guid:"TANGRAM__ku",lat:40.017635,lng:87.446655},{guid:"TANGRAM__kx",lat:39.982261,lng:87.34547},{guid:"TANGRAM__l0",lat:39.925625,lng:87.198291},{guid:"TANGRAM__l3",lat:39.890203,lng:87.087907},{guid:"TANGRAM__l6",lat:39.868941,lng:86.968325},{guid:"TANGRAM__l9",lat:39.805115,lng:87.00512},{guid:"TANGRAM__lc",lat:39.6915,lng:87.060312},{guid:"TANGRAM__lf",lat:39.563457,lng:87.06951},{guid:"TANGRAM__li",lat:39.463703,lng:87.133901},{guid:"TANGRAM__ll",lat:39.385223,lng:87.216689},{guid:"TANGRAM__lo",lat:39.428041,lng:87.336271},{guid:"TANGRAM__lr",lat:39.641734,lng:87.253483},{guid:"TANGRAM__lu",lat:39.670176,lng:87.400662},{guid:"TANGRAM__lx",lat:39.698606,lng:87.557039},{guid:"TANGRAM__m0",lat:39.727025,lng:87.695018},{guid:"TANGRAM__m3",lat:39.854763,lng:87.474251},{guid:"TANGRAM__m6",lat:39.606164,lng:87.621429},{guid:"TANGRAM__m9",lat:39.513598,lng:87.731813},{guid:"TANGRAM__mc",lat:39.442308,lng:87.842197},{guid:"TANGRAM__mf",lat:39.44944,lng:87.998574},{guid:"TANGRAM__mi",lat:39.599048,lng:88.007772},{guid:"TANGRAM__ml",lat:38.912477,lng:84.926225},{guid:"TANGRAM__mo",lat:38.233657,lng:85.009013},{guid:"TANGRAM__mr",lat:38.146534,lng:85.156191},{guid:"TANGRAM__mu",lat:38.124737,lng:85.312568},{guid:"TANGRAM__mx",lat:38.211886,lng:85.579329},{guid:"TANGRAM__n0",lat:38.132003,lng:85.459747},{guid:"TANGRAM__n6",lat:38.472703,lng:86.260029},{guid:"TANGRAM__n9",lat:39.142087,lng:87.170695},{guid:"TANGRAM__nc",lat:39.163574,lng:87.336271},{guid:"TANGRAM__nf",lat:39.056071,lng:87.501847},{guid:"TANGRAM__ni",lat:39.005847,lng:87.704217},{guid:"TANGRAM__nl",lat:39.134923,lng:87.851395},{guid:"TANGRAM__no",lat:39.185055,lng:87.989375},{guid:"TANGRAM__nr",lat:39.048899,lng:87.087907},{guid:"TANGRAM__nu",lat:38.883723,lng:87.014318},{guid:"TANGRAM__nx",lat:38.761387,lng:87.032716},{guid:"TANGRAM__o0",lat:38.617191,lng:87.078709},{guid:"TANGRAM__o3",lat:38.414825,lng:87.262682},{guid:"TANGRAM__o9",lat:39.170735,lng:88.127355},{guid:"TANGRAM__oc",lat:39.070415,lng:88.210143},{guid:"TANGRAM__of",lat:38.912477,lng:88.283732},{guid:"TANGRAM__oi",lat:38.732571,lng:88.311328},{guid:"TANGRAM__ol",lat:38.595537,lng:88.274533},{guid:"TANGRAM__oo",lat:38.487165,lng:88.219341},{guid:"TANGRAM__or",lat:38.378628,lng:88.182547},{guid:"TANGRAM__ou",lat:38.29893,lng:88.09056},{guid:"TANGRAM__p6",lat:38.219144,lng:87.501847},{guid:"TANGRAM__p9",lat:38.29168,lng:87.391463},{guid:"TANGRAM__pc",lat:38.847764,lng:87.281079},{guid:"TANGRAM__pf",lat:38.667693,lng:87.446655},{guid:"TANGRAM__pi",lat:38.631624,lng:87.68582},{guid:"TANGRAM__po",lat:38.876532,lng:88.053766},{guid:"TANGRAM__pr",lat:38.703744,lng:87.88819},{guid:"TANGRAM__pu",lat:40.088327,lng:87.584634},{guid:"TANGRAM__q0",lat:39.485091,lng:88.476903},{guid:"TANGRAM__q3",lat:39.335235,lng:88.421711},{guid:"TANGRAM__q6",lat:39.170735,lng:88.486102},{guid:"TANGRAM__q9",lat:39.655956,lng:88.550493},{guid:"TANGRAM__qc",lat:39.577695,lng:88.762061},{guid:"TANGRAM__qf",lat:39.456572,lng:89.010425},{guid:"TANGRAM__ql",lat:39.591931,lng:89.166802},{guid:"TANGRAM__qo",lat:39.677285,lng:89.461159},{guid:"TANGRAM__qr",lat:39.370944,lng:89.507152},{guid:"TANGRAM__qu",lat:39.220842,lng:89.405967},{guid:"TANGRAM__qx",lat:39.041725,lng:88.614883},{guid:"TANGRAM__r0",lat:38.912477,lng:88.734466},{guid:"TANGRAM__r3",lat:38.768589,lng:89.093213},{guid:"TANGRAM__r6",lat:38.876532,lng:89.277186},{guid:"TANGRAM__r9",lat:39.034551,lng:89.359974},{guid:"TANGRAM__rc",lat:38.811786,lng:88.881644},{guid:"TANGRAM__rf",lat:39.861852,lng:89.709522},{guid:"TANGRAM__ri",lat:39.861852,lng:89.884297},{guid:"TANGRAM__rl",lat:39.876029,lng:90.077468},{guid:"TANGRAM__ro",lat:39.876029,lng:90.279838},{guid:"TANGRAM__rr",lat:39.854763,lng:90.463811},{guid:"TANGRAM__ru",lat:39.876029,lng:90.620188},{guid:"TANGRAM__rx",lat:39.790924,lng:90.647784},{guid:"TANGRAM__s0",lat:39.684393,lng:90.61099},{guid:"TANGRAM__s3",lat:39.570576,lng:90.61099},{guid:"TANGRAM__sc",lat:39.485091,lng:89.829105},{guid:"TANGRAM__sf",lat:39.492218,lng:90.031475},{guid:"TANGRAM__si",lat:39.513598,lng:90.206249},{guid:"TANGRAM__sl",lat:39.520723,lng:90.33503},{guid:"TANGRAM__so",lat:39.527847,lng:90.454613},{guid:"TANGRAM__sr",lat:39.790924,lng:90.178653},{guid:"TANGRAM__su",lat:39.663066,lng:90.197051},{guid:"TANGRAM__sx",lat:39.727025,lng:89.700324},{guid:"TANGRAM__t0",lat:39.556336,lng:89.700324},{guid:"TANGRAM__t3",lat:39.392361,lng:89.709522},{guid:"TANGRAM__t6",lat:39.263761,lng:89.691125},{guid:"TANGRAM__t9",lat:39.14925,lng:89.672728},{guid:"TANGRAM__tc",lat:39.0202,lng:89.700324},{guid:"TANGRAM__tf",lat:38.876532,lng:89.718721},{guid:"TANGRAM__ti",lat:38.732571,lng:89.72792},{guid:"TANGRAM__tl",lat:38.617191,lng:89.810707},{guid:"TANGRAM__to",lat:38.530533,lng:89.957886},{guid:"TANGRAM__tr",lat:38.501624,lng:90.279838},{guid:"TANGRAM__tu",lat:38.537759,lng:90.105064},{guid:"TANGRAM__tx",lat:38.501624,lng:90.417818},{guid:"TANGRAM__u0",lat:38.523307,lng:90.684579},{guid:"TANGRAM__u3",lat:38.51608,lng:90.537401},{guid:"TANGRAM__u6",lat:38.544983,lng:90.776565},{guid:"TANGRAM__vi",lat:39.556336,lng:89.497953},{guid:"TANGRAM__vl",lat:39.698606,lng:89.304782},{guid:"TANGRAM__vo",lat:38.689326,lng:90.804161},{guid:"TANGRAM__vu",lat:38.804588,lng:90.81336},{guid:"TANGRAM__vx",lat:38.523307,lng:87.143099},{guid:"TANGRAM__w0",lat:38.255421,lng:88.016971},{guid:"TANGRAM__w3",lat:38.161062,lng:87.61223},{guid:"TANGRAM__w6",lat:38.11747,lng:87.722614},{guid:"TANGRAM__w9",lat:38.146534,lng:87.906587},{guid:"TANGRAM__wc",lat:39.235151,lng:87.906587},{guid:"TANGRAM__wl",lat:37.942839,lng:80.142928},{guid:"TANGRAM__wo",lat:40.923882,lng:81.522725},{guid:"TANGRAM__wr",lat:41.014525,lng:81.311156},{guid:"TANGRAM__wu",lat:41.091125,lng:81.145581},{guid:"TANGRAM__wx",lat:41.007557,lng:80.94321},{guid:"TANGRAM__x0",lat:40.930859,lng:80.814429},{guid:"TANGRAM__x3",lat:40.819138,lng:80.786833},{guid:"TANGRAM__x6",lat:40.67922,lng:80.832827},{guid:"TANGRAM__x9",lat:40.539005,lng:80.888018},{guid:"TANGRAM__xc",lat:40.43365,lng:80.989204},{guid:"TANGRAM__xf",lat:40.321087,lng:81.099587},{guid:"TANGRAM__xi",lat:40.993619,lng:81.725095},{guid:"TANGRAM__xl",lat:41.112,lng:81.863075},{guid:"TANGRAM__xo",lat:41.056318,lng:82.028651},{guid:"TANGRAM__xr",lat:40.979677,lng:82.139035},{guid:"TANGRAM__xu",lat:40.888986,lng:82.185028},{guid:"TANGRAM__xx",lat:40.763207,lng:82.203425},{guid:"TANGRAM__y0",lat:40.644194,lng:82.175829},{guid:"TANGRAM__y3",lat:40.55304,lng:82.129836},{guid:"TANGRAM__y6",lat:40.285872,lng:81.89987},{guid:"TANGRAM__y9",lat:40.215387,lng:81.817082},{guid:"TANGRAM__yc",lat:40.123646,lng:81.669904},{guid:"TANGRAM__yf",lat:40.081261,lng:81.522725},{guid:"TANGRAM__yi",lat:40.10952,lng:81.375547},{guid:"TANGRAM__yl",lat:40.208334,lng:81.228368},{guid:"TANGRAM__yr",lat:40.440679,lng:82.093041},{guid:"TANGRAM__yu",lat:40.36332,lng:82.010254},{guid:"TANGRAM__yx",lat:41.146778,lng:82.212624},{guid:"TANGRAM__z0",lat:41.049354,lng:82.387398},{guid:"TANGRAM__z3",lat:40.972706,lng:82.589768},{guid:"TANGRAM__z6",lat:41.070243,lng:82.736947},{guid:"TANGRAM__z9",lat:41.160683,lng:82.838132},{guid:"TANGRAM__zc",lat:41.188486,lng:83.012906},{guid:"TANGRAM__zf",lat:41.000588,lng:83.252071},{guid:"TANGRAM__zi",lat:41.112,lng:83.169283},{guid:"TANGRAM__zl",lat:40.888986,lng:83.279667},{guid:"TANGRAM__zo",lat:40.777194,lng:83.242872},{guid:"TANGRAM__zr",lat:40.644194,lng:83.206078},{guid:"TANGRAM__zu",lat:40.524967,lng:83.132489},{guid:"TANGRAM__10f",lat:40.144828,lng:82.64496},{guid:"TANGRAM__10i",lat:40.180116,lng:82.497782},{guid:"TANGRAM__10l",lat:40.321087,lng:82.286213},{guid:"TANGRAM__10o",lat:40.43365,lng:82.203425},{guid:"TANGRAM__10r",lat:40.812149,lng:81.89987},{guid:"TANGRAM__10u",lat:40.951786,lng:81.918267},{guid:"TANGRAM__10x",lat:41.181536,lng:82.065445},{guid:"TANGRAM__110",lat:40.658207,lng:82.010254},{guid:"TANGRAM__113",lat:40.23654,lng:82.359802},{guid:"TANGRAM__116",lat:40.41959,lng:83.095694},{guid:"TANGRAM__11c",lat:40.342207,lng:83.003708},{guid:"TANGRAM__11f",lat:40.250639,lng:82.911721},{guid:"TANGRAM__11i",lat:40.187172,lng:82.78294}];
    function addMarker(lng, lat) {
        var marker = new BMap.Marker(new BMap.Point(lng, lat));
        marker.setAnimation(BMAP_ANIMATION_DROP);
        map.addOverlay(marker)
    }

    if (!Array.prototype.shuffle) {
        Array.prototype.shuffle = function () {
            for (var j, x, i = this.length; i; j = parseInt(Math.random() * i), x = this[--i], this[i] = this[j], this[j] = x);
            return this;
        };
    }
    markerText.shuffle();
    function loopAddMarker(markers, callback) {
        var i = 0;
        var len = markers.length;
        var callback = callback || function () {
                };
        var loop = '';

        function loopAddMarkerInner() {
            if (i == len) {
                clearTimeout(loop);
                callback();
                return false;
            }
            addMarker(markers[i].lng, markers[i].lat);
            i++;
            loop = setTimeout(loopAddMarkerInner, 200);
        }

        loopAddMarkerInner();
    }

    function showMarkerText() {
        map.closeInfoWindow();
        map.panTo(new BMap.Point(84.699584, 39.3202)); //82.699584
        setTimeout(function () {
            zoomTo(8, 1000, function () {
                loopAddMarker(markerText, function () {
                    setTimeout(function () {
                        slideDown('theEnd', 1000, function () {
                            var theEndText = '<div id="theEndText"><h1>Marry Me, My Dearest Baby. :) --by Issac</h1><br />' +
                                    '<button onclick="YESIDO()">我愿意</button>' +
                                    '<button onclick="window.location.reload();">再看一次</button></div>';
                            document.getElementById('theEnd').innerHTML = theEndText;
                        });
                    }, 5000);
                });
            })
        }, 1000);
    }

    //
    function YESIDO(){
        alert("我的成功了，他高兴惨了。请电话告诉他这个好消息。");
    }

    function slideDown(id, speed, callback) {
        var object = document.getElementById(id);
        var timeout = speed * 0.001;
        var callback = callback || function () {
                };
        var loop = '';
        object.style.display = 'block';
        object.style.height = '0%';
        function slideDownInner() {
            var curHeight = parseFloat(object.style.height) || 0;
            if (curHeight >= 100) {
                clearTimeout(loop);
                callback();
                return false;
            }
            object.style.height = (curHeight + 0.1) + '%';
            loop = setTimeout(slideDownInner, timeout);
        }

        slideDownInner();
    }

    function preLoadImages(imagesList, callback) {
        var len = imagesList.length;
        var i = 0;
        var images = {};
        var callback = callback || function () {
                };

        function loadImage() {
            if (i == len) {
                callback();
                return false;
            }
            images[i] = new Image();
            images[i].src = imagesList[i];
            i++;
            loadImage();
        }

        loadImage();
    }

    var map;

    function initMap() {
        map = new BMap.Map("map");
        var point = new BMap.Point(MP_CEN.lng, MP_CEN.lat);
        map.centerAndZoom(point, 4);
        map.disableDragging();
        map.disableDoubleClickZoom();
        init();
    }

    function init() {
        document.getElementById('loading').style.display = 'none';
        document.getElementById('theEnd').style.height = '0';
        document.getElementById('theEnd').innerHTML = '';
        map.setMapType(BMAP_NORMAL_MAP);
        var point = new BMap.Point(MP_CEN.lng, MP_CEN.lat);
        map.centerAndZoom(point, 4);
        map.clearOverlays();
        map.reset();
        MUSIC.play();
        setTimeout(function () {
            map.panTo(new BMap.Point(CD_UESTC.lng, CD_UESTC.lat));
            panZoom_UESTC();
        }, 2000);
    }

    function loadScript() {
        var script = document.createElement("script");
        script.src = "http://api.map.baidu.com/api?v=1.2&callback=initMap";
        document.body.appendChild(script);
    }

    window.onload = function () {
        var imglist = [
            'http://lukesign.qiniudn.com/images/wannato/fenghuang.jpg',
            'http://lukesign.qiniudn.com/images/wannato/guilin.jpg',
            'http://lukesign.qiniudn.com/images/wannato/xiamen.jpg',
            'http://lukesign.qiniudn.com/images/wannato/xihu.jpg',
            'http://lukesign.qiniudn.com/images/wannato/xizang.jpg'
        ];

        soundManager.setup({
            url: 'http://lukesign.qiniudn.com/sm/',
            onready: initMP3
        });

        function initMP3() {

            MUSIC = soundManager.createSound({
                id: 'mp3',
                url: './LemonTree.mp3',
                onload: function () {
                    preLoadImages(imglist, function () {
                        setTimeout(function () {
                            var loading = document.getElementById('loading');
                            loading.style.cursor = 'pointer';
                            loading.innerHTML = '点击开始';
                            loading.onclick = function () {
                                screenfull && screenfull.request();
                                loadScript();
                            }
                        }, 3000);
                    });
                }
            });
            MUSIC.load();
        }
    };
</script>
<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?c142366bae08a5add7c3c1ce2703b10d";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>